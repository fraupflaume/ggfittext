<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A 'ggplot2' geom to fit text inside a box — geom_bar_text • ggfittext</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="A 'ggplot2' geom to fit text inside a box — geom_bar_text"><meta property="og:description" content="geom_fit_text() shrinks, grows and wraps text to fit inside a defined
box.
geom_bar_text() is a convenience wrapper around geom_fit_text() for
labelling bar plots generated with geom_col() and geom_bar()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggfittext</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction-to-ggfittext.html">Introduction to 'ggfittext'</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/wilkox/ggfittext" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A 'ggplot2' geom to fit text inside a box</h1>
    <small class="dont-index">Source: <a href="https://github.com/wilkox/ggfittext/blob/HEAD/R/geom_bar_text.R" class="external-link"><code>R/geom_bar_text.R</code></a>, <a href="https://github.com/wilkox/ggfittext/blob/HEAD/R/geom_fit_text.R" class="external-link"><code>R/geom_fit_text.R</code></a></small>
    <div class="hidden name"><code>geom_fit_text.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>geom_fit_text()</code> shrinks, grows and wraps text to fit inside a defined
box.
<code>geom_bar_text()</code> is a convenience wrapper around <code>geom_fit_text()</code> for
labelling bar plots generated with <code>geom_col()</code> and <code>geom_bar()</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geom_bar_text</span><span class="op">(</span></span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  inherit.aes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  padding.x <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  padding.y <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  min.size <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  place <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outside <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  grow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reflow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fullheight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formatter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contrast <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rich <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geom_fit_text</span><span class="op">(</span></span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  inherit.aes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  padding.x <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  padding.y <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  min.size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  place <span class="op">=</span> <span class="st">"centre"</span>,</span>
<span>  outside <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  grow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reflow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fullheight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formatter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contrast <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rich <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>mapping</dt>
<dd><p><code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">ggplot2::aes()</a></code> object as standard in 'ggplot2'. Note
that aesthetics specifying the box must be provided. See Details.</p></dd>


<dt>data, stat, position, na.rm, show.legend, inherit.aes, ...</dt>
<dd><p>Standard geom
arguments as for <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">ggplot2::geom_text()</a></code>.</p></dd>


<dt>padding.x, padding.y</dt>
<dd><p>Horizontal and vertical padding around the text,
expressed in <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">grid::unit()</a></code> objects. Both default to 1 mm.</p></dd>


<dt>min.size</dt>
<dd><p>Minimum font size, in points. Text that would need to be
shrunk below this size to fit the box will be hidden. Defaults to 4 pt (8 pt
for <code>geom_bar_text()</code>)</p></dd>


<dt>place</dt>
<dd><p>Where inside the box to place the text. Default is 'centre';
other options are 'topleft', 'top', 'topright', 'right', 'bottomright',
'bottom', 'bottomleft', 'left', and 'center'/'middle' which are both
synonyms for 'centre'. For <code>geom_bar_text()</code>, will be set heuristically if
not specified.</p></dd>


<dt>outside</dt>
<dd><p>If <code>TRUE</code>, text placed in one of 'top', 'right', 'bottom' or
'left' that would need to be shrunk smaller than <code>min.size</code> to fit the box
will be drawn outside the box if possible. This is mostly useful for drawing
text inside bar/column geoms. Defaults to TRUE for <code>position = "identity"</code>
when using <code>geom_bar_text()</code>, otherwise FALSE.</p></dd>


<dt>grow</dt>
<dd><p>If <code>TRUE</code>, text will be grown as well as shrunk to fill the box.
Defaults to FALSE.</p></dd>


<dt>reflow</dt>
<dd><p>If <code>TRUE</code>, text will be reflowed (wrapped) to better fit the
box. Defaults to FALSE.</p></dd>


<dt>hjust, vjust</dt>
<dd><p>Horizontal and vertical justification of the text. By
default, these are automatically set to appropriate values based on <code>place</code>.</p></dd>


<dt>fullheight</dt>
<dd><p>If <code>TRUE</code>, descenders will be counted when resizing and
placing text; if <code>FALSE</code>, only the x-height and ascenders will be counted.
The main use for this option is for aligning text at the baseline (<code>FALSE</code>)
or preventing descenders from spilling outside the box (<code>TRUE</code>). By default
this is set automatically depending on <code>place</code> and <code>grow</code>.</p></dd>


<dt>width, height</dt>
<dd><p>When using <code>x</code> and/or <code>y</code> aesthetics, these set the
width and/or height of the box. These should be either <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">grid::unit()</a></code>
objects or numeric values on the <code>x</code> and <code>y</code> scales.</p></dd>


<dt>formatter</dt>
<dd><p>A function that will be applied to the text before it is
drawn. This is useful when using <code>geom_fit_text()</code> in context involving
interpolated variables, such as with the 'gganimate' package. <code>formatter</code>
will be applied serially to each element in the <code>label</code> column, so it does
not need to be a vectorised function.</p></dd>


<dt>contrast</dt>
<dd><p>If <code>TRUE</code> and in combination with a <code>fill</code> aesthetic, the
colour of the text will be inverted for better contrast against dark
background fills. <code>FALSE</code> by default for <code>geom_fit_text()</code>, set
heuristically for <code>geom_bar_text()</code>.</p></dd>


<dt>rich</dt>
<dd><p>If <code>TRUE</code>, text will be formatted with markdown and HTML markup
as implemented by <code><a href="https://wilkelab.org/gridtext/reference/richtext_grob.html" class="external-link">gridtext::richtext_grob()</a></code>. <code>FALSE</code> by default. Rich text
cannot be drawn in polar coordinates. Please note that rich text support is
<strong>experimental</strong> and breaking changes are likely</p></dd>


<dt>flip</dt>
<dd><p>If <code>TRUE</code>, when in polar coordinates 'upside-down' text will be
flipped the 'right way up', to enhance readability.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Except where noted, <code>geom_fit_text()</code> behaves more or less like
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">ggplot2::geom_text()</a></code>.</p>
<p>There are three ways to define the box in which you want the text to be
drawn. The extents of the box on the x and y axes are independent, so any
combination of these methods can be used:</p><ol><li><p>If the <code>x</code> and/or <code>y</code> aesthetics are used to set the location of the box,
the width or height will be set automatically based on the number of
discrete values in <code>x</code> and/and <code>y</code>.</p></li>
<li><p>Alternatively, if <code>x</code> and/or <code>y</code> aesthetics are used, the width and/or
height of the box can be overridden with a 'width' and/or 'height' argument.
These should be <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">grid::unit()</a></code> objects; if not, they will be assumed to use
the native axis scale.</p></li>
<li><p>The boundaries of the box can be set using the aesthetics 'xmin' and
'xmax', and/or 'ymin' and 'ymax'.</p></li>
</ol><p>If the text is too big for the box, it will be shrunk to fit the box. With
<code>grow = TRUE</code>, the text will be made to fill the box completely whether that
requires shrinking or growing.</p>
<p><code>reflow = TRUE</code> will cause the text to be reflowed (wrapped) to better fit
in the box. If the text cannot be made to fit by reflowing alone, it will be
reflowed then shrunk to fit the box. Existing line breaks in the text will
be respected when reflowing.</p>
<p><code>geom_fit_text()</code> includes experimental support for drawing text in polar
coordinates (by adding <code>coord_polar()</code> to the plot), however not all
features are available when doing so.</p>
    </div>
    <div id="aesthetics">
    <h2>Aesthetics</h2>
    

<ul><li><p>label (required)</p></li>
<li><p>(xmin AND xmax) OR x (required)</p></li>
<li><p>(ymin AND ymax) OR y (required)</p></li>
<li><p>alpha</p></li>
<li><p>angle</p></li>
<li><p>colour</p></li>
<li><p>family</p></li>
<li><p>fontface</p></li>
<li><p>lineheight</p></li>
<li><p>size</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/presidential.html" class="external-link">presidential</a></span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">start</span>, ymax <span class="op">=</span> <span class="va">end</span>,</span></span>
<span class="r-in"><span>    label <span class="op">=</span> <span class="va">name</span>, x <span class="op">=</span> <span class="va">party</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">geom_fit_text</span><span class="op">(</span>grow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="geom_fit_text-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Wilkins.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

